---
description: Rules for React app, data fetching, and UI structure
globs:
  - 'apps/web/**'
---

# React Rules

- Use React Router for pages in `src/routes/*`.
- Use TanStack Query for server state. Never fetch in useEffect directly.
- Centralize API calls using axios in `src/lib/api-client.ts`. Always throw on non-2xx.
- Use proper loading and error states in components.
- Implement proper form validation with user feedback.
- Use React.memo() for expensive components that receive stable props.
- Avoid prop drilling; use context or state management when needed.
- Implement proper accessibility (a11y) with ARIA labels and keyboard navigation.

# Styling with MUI & Leap Brand

- **ALWAYS use MUI components** for all UI elements - avoid custom CSS files.
- **ALWAYS follow Leap Design Tokens** from Confluence (see `docs/LEAP_STYLE_GUIDES.md`).
- Use the `sx` prop for component-specific styling - never create `.css` files.
- **NEVER hardcode colors** - use theme palette values (`primary.main`, `error.main`, etc.).
- Use MUI icons from `@mui/icons-material` instead of inline SVGs.
- Prefer MUI's `Box`, `Stack`, `Container` for layout over custom divs.
- Use `useTheme()` hook when needing theme values in component logic.
- Typography must follow Leap tokens: Poppins for headlines/buttons, Arial for body.
- The theme is defined in `src/theme/theme.ts` with light and dark mode support.

## Leap Brand Colors (Reference)

- Primary (Leap Green): `#26D07C` (light) / `#63D98B` (dark)
- Secondary (Blue): `#4779FF` (light) / `#6C94FF` (dark)
- Error: `#F1001F` (light) / `#F53951` (dark)
- Text Primary: `#2E2E2E` (light) / `#FFFFFF` (dark)

## Forbidden Patterns

- Creating new `.css` files
- Hardcoding hex colors in components
- Using inline SVG icons (use `@mui/icons-material`)
- Using gradients for primary buttons (use solid Leap Green)

# Components

- Keep pages thin; extract components when they exceed ~100 lines.
- Use TypeScript for all component props with proper types (prefer `type` over `interface`).
- Implement proper error boundaries for component error handling.
- Use consistent naming conventions for components and files.
- Extract reusable UI components into a shared components library.

# API Integration

- **ALWAYS use axios** for HTTP requests - never use native `fetch()`.
- Use React 19 with Vite; prefer `@tanstack/react-query` for data fetching.
- Centralize axios instance configuration in `src/lib/api-client.ts` with base URL, interceptors, and error handling.
- Read API base from `VITE_API_BASE`; keep default in `README.md` synced with code.
- If routes, paths, or error envelope change, update `apps/web/src/lib/api-client.ts` and the `README.md` examples.
- Document any new env vars or flags.
- Implement proper error handling for API failures using axios interceptors.
- Use proper TypeScript types for API responses.
- Implement request/response interceptors for auth tokens, error handling, and logging.
- Cache API responses appropriately with TanStack Query.

# Performance & Optimization

- Use code splitting with React.lazy() for route-based components.
- Implement proper image optimization and lazy loading.
- Use proper bundle analysis to monitor bundle size.
- Implement proper caching strategies for static assets.
- Use proper SEO optimization with meta tags and structured data.

# Comprehensive Documentation

- **Frontend Development**: See `docs/DEVELOPMENT.md` for detailed React patterns, component structure, custom hooks, and API client examples.
- **Architecture**: See `docs/ARCHITECTURE.md` for frontend design patterns, performance optimization, and security considerations.
- **Security**: See `docs/SECURITY.md` for frontend security best practices and XSS prevention.
- **Leap Style Guides**: See `docs/LEAP_STYLE_GUIDES.md` for Confluence page references with brand colors and typography tokens.
